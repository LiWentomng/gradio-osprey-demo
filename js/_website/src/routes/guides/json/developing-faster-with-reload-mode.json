{"guide": {"name": "developing-faster-with-reload-mode", "category": "other-tutorials", "pretty_category": "Other Tutorials", "guide_index": null, "absolute_index": 35, "pretty_name": "Developing Faster With Reload Mode", "content": "# Developing Faster with Auto-Reloading\n\n**Prerequisite**: This Guide requires you to know about Blocks. Make sure to [read the Guide to Blocks first](https://gradio.app/guides/quickstart/#blocks-more-flexibility-and-control).\n\nThis guide covers auto reloading, reloading in a Python IDE, and using gradio with Jupyter Notebooks.\n\n## Why Auto-Reloading?\n\nWhen you are building a Gradio demo, particularly out of Blocks, you may find it cumbersome to keep re-running your code to test your changes.\n\nTo make it faster and more convenient to write your code, we've made it easier to \"reload\" your Gradio apps instantly when you are developing in a **Python IDE** (like VS Code, Sublime Text, PyCharm, or so on) or generally running your Python code from the terminal. We've also developed an analogous \"magic command\" that allows you to re-run cells faster if you use **Jupyter Notebooks** (or any similar environment like Colab).\n\nThis short Guide will cover both of these methods, so no matter how you write Python, you'll leave knowing how to build Gradio apps faster.\n\n## Python IDE Reload \ud83d\udd25\n\nIf you are building Gradio Blocks using a Python IDE, your file of code (let's name it `run.py`) might look something like this: \n\n```python\nimport gradio as gr\n\nwith gr.Blocks() as demo:\n    gr.Markdown(\"# Greetings from Gradio!\")\n    inp = gr.Textbox(placeholder=\"What is your name?\")\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: f\"Welcome, {x}!\", \n               inputs=inp, \n               outputs=out)\n\nif __name__ == \"__main__\":\n    demo.launch()    \n```\n\nThe problem is that anytime that you want to make a change to your layout, events, or components, you have to close and rerun your app by writing `python run.py`.\n\nInstead of doing this, you can run your code in **reload mode** by changing 1 word: `python` to `gradio`:\n\nIn the terminal, run `gradio run.py`. That's it! \n\nNow, you'll see that after you'll see something like this:\n\n```bash\nLaunching in *reload mode* on: http://127.0.0.1:7860 (Press CTRL+C to quit)\n\nWatching...\n\nWARNING:  The --reload flag should not be used in production on Windows.\n```\n\nThe important part here is the line that says `Watching...` What's happening here is that Gradio will be observing the directory where `run.py` file lives, and if the file changes, it will automatically rerun the file for you. So you can focus on writing your code, and your Gradio demo will refresh automatically \ud83e\udd73\n\n\u26a0\ufe0f Warning: the `gradio` command does not detect the parameters passed to the `launch()` methods because the `launch()` method is never called in reload mode. For example, setting `auth`, or `show_error` in `launch()` will not be reflected in the app.\n\nThere is one important thing to keep in mind when using the reload mode: Gradio specifically looks for a Gradio Blocks/Interface demo called `demo` in your code. If you have named your demo something else, you will need to pass in the name of your demo's FastAPI app as the 2nd parameter in your code. For Gradio demos, the FastAPI app can be accessed using the `.app` attribute. So if your `run.py` file looked like this:\n\n```python\nimport gradio as gr\n\nwith gr.Blocks() as my_demo:\n    gr.Markdown(\"# Greetings from Gradio!\")\n    inp = gr.Textbox(placeholder=\"What is your name?\")\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: f\"Welcome, {x}!\", \n               inputs=inp, \n               outputs=out)\n\nif __name__ == \"__main__\":\n    my_demo.launch()    \n```\n\nThen you would launch it in reload mode like this: `gradio run.py my_demo.app`. \n\n\ud83d\udd25 If your application accepts command line arguments, you can pass them in as well. Here's an example:\n\n```python\nimport gradio as gr\nimport argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"--name\", type=str, default=\"User\")\nargs, unknown = parser.parse_known_args()\n\nwith gr.Blocks() as demo:\n    gr.Markdown(f\"# Greetings {args.name}!\")\n    inp = gr.Textbox()\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: x, inputs=inp, outputs=out)\n\nif __name__ == \"__main__\":\n    demo.launch()\n```\n\nWhich you could run like this: `gradio run.py --name Gretel`\n\nAs a small aside, this auto-reloading happens if you change your `run.py` source code or the Gradio source code. Meaning that this can be useful if you decide to [contribute to Gradio itself](https://github.com/gradio-app/gradio/blob/main/CONTRIBUTING.md) \u2705\n\n## Jupyter Notebook Magic \ud83d\udd2e\n\nWhat about if you use Jupyter Notebooks (or Colab Notebooks, etc.) to develop code? We got something for you too!\n\nWe've developed a **magic command** that will create and run a Blocks demo for you. To use this, load the gradio extension at the top of your notebook: \n\n`%load_ext gradio`\n\nThen, in the cell that you are developing your Gradio demo, simply write the magic command **`%%blocks`** at the top, and then write the layout and components like you would normally:\n\n```py\n%%blocks \n\nimport gradio as gr\n\ngr.Markdown(\"# Greetings from Gradio!\")\ninp = gr.Textbox(placeholder=\"What is your name?\")\nout = gr.Textbox()\n\ninp.change(fn=lambda x: f\"Welcome, {x}!\", \n           inputs=inp, \n           outputs=out)\n```\n\nNotice that:\n\n* You do not need to put the boiler plate `with gr.Blocks() as demo:` and `demo.launch()` code \u2014 Gradio does that for you automatically!\n\n* Every time you rerun the cell, Gradio will re-launch your app on the same port and using the same underlying web server. This means you'll see your changes *much, much faster* than if you were rerunning the cell normally. \n\nHere's what it looks like in a jupyter notebook:\n\n![](https://i.ibb.co/nrszFws/Blocks.gif)\n\n\ud83e\ude84 This works in colab notebooks too! [Here's a colab notebook](https://colab.research.google.com/drive/1jUlX1w7JqckRHVE-nbDyMPyZ7fYD8488?authuser=1#scrollTo=zxHYjbCTTz_5) where you can see the Blocks magic in action. Try making some changes and re-running the cell with the Gradio code! \n\nThe Notebook Magic is now the author's preferred way of building Gradio demos. Regardless of how you write Python code, we hope either of these methods will give you a much better development experience using Gradio. \n\n--------\n\n## Next Steps\n\nNow that you know how to develop quickly using Gradio, start building your own! \n\nIf you are looking for inspiration, try exploring demos other people have built with Gradio, [browse public Hugging Face Spaces](http://hf.space/) \ud83e\udd17\n\n", "html": "<h1 id=\"developing-faster-with-auto-reloading\">Developing Faster with Auto-Reloading</h1>\n\n<p><strong>Prerequisite</strong>: This Guide requires you to know about Blocks. Make sure to <a rel=\"noopener\" target=\"_blank\" href=\"https://gradio.app/guides/quickstart/#blocks-more-flexibility-and-control\">read the Guide to Blocks first</a>.</p>\n\n<p>This guide covers auto reloading, reloading in a Python IDE, and using gradio with Jupyter Notebooks.</p>\n\n<h2 id=\"why-auto-reloading\">Why Auto-Reloading?</h2>\n\n<p>When you are building a Gradio demo, particularly out of Blocks, you may find it cumbersome to keep re-running your code to test your changes.</p>\n\n<p>To make it faster and more convenient to write your code, we've made it easier to \"reload\" your Gradio apps instantly when you are developing in a <strong>Python IDE</strong> (like VS Code, Sublime Text, PyCharm, or so on) or generally running your Python code from the terminal. We've also developed an analogous \"magic command\" that allows you to re-run cells faster if you use <strong>Jupyter Notebooks</strong> (or any similar environment like Colab).</p>\n\n<p>This short Guide will cover both of these methods, so no matter how you write Python, you'll leave knowing how to build Gradio apps faster.</p>\n\n<h2 id=\"python-ide-reload\">Python IDE Reload \ud83d\udd25</h2>\n\n<p>If you are building Gradio Blocks using a Python IDE, your file of code (let's name it <code>run.py</code>) might look something like this: </p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio as gr\n\nwith gr.Blocks() as demo:\n    gr.Markdown(\"# Greetings from Gradio!\")\n    inp = gr.Textbox(placeholder=\"What is your name?\")\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: f\"Welcome, {x}!\", \n               inputs=inp, \n               outputs=out)\n\nif __name__ == \"__main__\":\n    demo.launch()    \n</code></pre></div>\n\n<p>The problem is that anytime that you want to make a change to your layout, events, or components, you have to close and rerun your app by writing <code>python run.py</code>.</p>\n\n<p>Instead of doing this, you can run your code in <strong>reload mode</strong> by changing 1 word: <code>python</code> to <code>gradio</code>:</p>\n\n<p>In the terminal, run <code>gradio run.py</code>. That's it! </p>\n\n<p>Now, you'll see that after you'll see something like this:</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>Launching in *reload mode* on: http://127.0.0.1:7860 (Press CTRL+C to quit)\n\nWatching...\n\nWARNING:  The --reload flag should not be used in production on Windows.\n</code></pre></div>\n\n<p>The important part here is the line that says <code>Watching...</code> What's happening here is that Gradio will be observing the directory where <code>run.py</code> file lives, and if the file changes, it will automatically rerun the file for you. So you can focus on writing your code, and your Gradio demo will refresh automatically \ud83e\udd73</p>\n\n<p>\u26a0\ufe0f Warning: the <code>gradio</code> command does not detect the parameters passed to the <code>launch()</code> methods because the <code>launch()</code> method is never called in reload mode. For example, setting <code>auth</code>, or <code>show_error</code> in <code>launch()</code> will not be reflected in the app.</p>\n\n<p>There is one important thing to keep in mind when using the reload mode: Gradio specifically looks for a Gradio Blocks/Interface demo called <code>demo</code> in your code. If you have named your demo something else, you will need to pass in the name of your demo's FastAPI app as the 2nd parameter in your code. For Gradio demos, the FastAPI app can be accessed using the <code>.app</code> attribute. So if your <code>run.py</code> file looked like this:</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio as gr\n\nwith gr.Blocks() as my_demo:\n    gr.Markdown(\"# Greetings from Gradio!\")\n    inp = gr.Textbox(placeholder=\"What is your name?\")\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: f\"Welcome, {x}!\", \n               inputs=inp, \n               outputs=out)\n\nif __name__ == \"__main__\":\n    my_demo.launch()    \n</code></pre></div>\n\n<p>Then you would launch it in reload mode like this: <code>gradio run.py my_demo.app</code>. </p>\n\n<p>\ud83d\udd25 If your application accepts command line arguments, you can pass them in as well. Here's an example:</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio as gr\nimport argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"--name\", type=str, default=\"User\")\nargs, unknown = parser.parse_known_args()\n\nwith gr.Blocks() as demo:\n    gr.Markdown(f\"# Greetings {args.name}!\")\n    inp = gr.Textbox()\n    out = gr.Textbox()\n\n    inp.change(fn=lambda x: x, inputs=inp, outputs=out)\n\nif __name__ == \"__main__\":\n    demo.launch()\n</code></pre></div>\n\n<p>Which you could run like this: <code>gradio run.py --name Gretel</code></p>\n\n<p>As a small aside, this auto-reloading happens if you change your <code>run.py</code> source code or the Gradio source code. Meaning that this can be useful if you decide to <a rel=\"noopener\" target=\"_blank\" href=\"https://github.com/gradio-app/gradio/blob/main/CONTRIBUTING.md\">contribute to Gradio itself</a> \u2705</p>\n\n<h2 id=\"jupyter-notebook-magic\">Jupyter Notebook Magic \ud83d\udd2e</h2>\n\n<p>What about if you use Jupyter Notebooks (or Colab Notebooks, etc.) to develop code? We got something for you too!</p>\n\n<p>We've developed a <strong>magic command</strong> that will create and run a Blocks demo for you. To use this, load the gradio extension at the top of your notebook: </p>\n\n<p><code>%load_ext gradio</code></p>\n\n<p>Then, in the cell that you are developing your Gradio demo, simply write the magic command <strong><code>%%blocks</code></strong> at the top, and then write the layout and components like you would normally:</p>\n\n<div class='codeblock'><pre><code class='lang-py'>%%blocks \n\nimport gradio as gr\n\ngr.Markdown(\"# Greetings from Gradio!\")\ninp = gr.Textbox(placeholder=\"What is your name?\")\nout = gr.Textbox()\n\ninp.change(fn=lambda x: f\"Welcome, {x}!\", \n           inputs=inp, \n           outputs=out)\n</code></pre></div>\n\n<p>Notice that:</p>\n\n<ul>\n<li><p>You do not need to put the boiler plate <code>with gr.Blocks() as demo:</code> and <code>demo.launch()</code> code \u2014 Gradio does that for you automatically!</p></li>\n<li><p>Every time you rerun the cell, Gradio will re-launch your app on the same port and using the same underlying web server. This means you'll see your changes <em>much, much faster</em> than if you were rerunning the cell normally. </p></li>\n</ul>\n\n<p>Here's what it looks like in a jupyter notebook:</p>\n\n<p><img src=\"https://i.ibb.co/nrszFws/Blocks.gif\" alt=\"\" /></p>\n\n<p>\ud83e\ude84 This works in colab notebooks too! <a rel=\"noopener\" target=\"_blank\" href=\"https://colab.research.google.com/drive/1jUlX1w7JqckRHVE-nbDyMPyZ7fYD8488?authuser=1#scrollTo=zxHYjbCTTz_5\">Here's a colab notebook</a> where you can see the Blocks magic in action. Try making some changes and re-running the cell with the Gradio code! </p>\n\n<p>The Notebook Magic is now the author's preferred way of building Gradio demos. Regardless of how you write Python code, we hope either of these methods will give you a much better development experience using Gradio. </p>\n\n<hr />\n\n<h2 id=\"next-steps\">Next Steps</h2>\n\n<p>Now that you know how to develop quickly using Gradio, start building your own! </p>\n\n<p>If you are looking for inspiration, try exploring demos other people have built with Gradio, <a rel=\"noopener\" target=\"_blank\" href=\"http://hf.space/\">browse public Hugging Face Spaces</a> \ud83e\udd17</p>\n", "tags": [], "spaces": [], "url": "/guides/developing-faster-with-reload-mode/", "contributor": null}}